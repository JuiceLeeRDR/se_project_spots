!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_inactive",inputErrorClass:"modal__input-error",errorClass:"modal__error",inputErrorTypeClass:"modal__input-error_type"},t=(e,t,o)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorTypeClass),r.textContent=""},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?r(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},r=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=e=>{document.querySelectorAll(e.formSelector).forEach((n=>{((e,n)=>{const a=Array.from(e.querySelectorAll(n.inputSelector)),l=e.querySelector(n.submitButtonSelector);console.log(a),console.log(l),o(a,l,n),e.addEventListener("reset",(()=>{r(l,n)})),a.forEach((r=>{r.addEventListener("input",(function(){((e,o,r)=>{o.validity.valid?t(e,o,r):((e,t,o,r)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.add(r.inputErrorTypeClass),n.textContent=o})(e,o,o.validationMessage,r)})(e,r,n),o(a,l,n)}))}))})(n,e)}))};n(e),document.querySelectorAll(".modal__form"),document.querySelectorAll(".modal__input");const a=document.querySelector(".profile__edit-button"),l=document.querySelector("#edit-modal"),i=(document.querySelector(".modal__close-button"),l.querySelector(".modal__form")),c=document.querySelector(".profile__name"),u=document.querySelector(".profile__description"),d=document.querySelector("#profile-name-input"),s=document.querySelector("#profile-description-input"),m=document.querySelector("#card-template"),f=document.querySelector(".cards__list"),p=document.querySelector("#preview-modal"),_=p.querySelector(".modal__image"),y=p.querySelector(".modal__image-caption"),v=document.querySelector(".profile__add-button"),b=document.querySelector("#post-modal"),x=b.querySelector(".modal__form"),q=(b.querySelector(".modal__close-button"),b.querySelector("#image-link-input")),S=b.querySelector("#image-caption-input"),w=document.querySelectorAll(".modal__close-button");function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend";const o=function(e){const t=m.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__text"),r=t.querySelector(".card__image"),n=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return o.textContent=e.name,r.src=e.link,r.alt=e.name,a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{n.classList.toggle("card__like-button_liked")})),r.addEventListener("click",(()=>{D(p),_.src=e.link,_.alt=e.name,y.textContent=e.name})),t}(e);f[t](o)}function h(e){console.log("Closing modal:",e),e.classList.remove("modal_opened"),document.removeEventListener("keydown",k),e.removeEventListener("mousedown",E)}function D(e){e.classList.add("modal_opened"),document.addEventListener("keydown",k),e.addEventListener("mousedown",E)}function k(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&h(e)}}function E(e){e.target.classList.contains("modal_opened")&&h(e.target)}b.querySelector(".modal__save-button"),document.querySelector(".profile__avatar"),document.querySelector(".profile__edit-button"),document.querySelector(".profile__add-button"),w.forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>h(t)))})),a.addEventListener("click",(()=>{var o,r;d.value=c.textContent,s.value=u.textContent,o=i,r=e,[d,s].forEach((e=>{t(o,e,r)})),D(l)})),i.addEventListener("submit",(function(e){e.preventDefault(),c.textContent=d.value,u.textContent=s.value,h(l)})),x.addEventListener("submit",(function(e){e.preventDefault(),console.log(q.value),console.log(S.value),g({name:S.value,link:q.value}),e.target.reset(),h(b)})),[{name:"Walking through a Japanese side street ",alt:"Walking through a Japanese side street",link:"https://images.unsplash.com/photo-1508504509543-5ca56440e013?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Outdoor cafe near stream in Italy",alt:"Outdoor cafe near stream in Italy",link:"https://images.unsplash.com/photo-1553342385-111fd6bc6ab3?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Mount Oso, Japan",alt:"Mount Oso, Japan",link:"https://images.unsplash.com/photo-1520312501384-dbdb83a1cb11?q=80&w=1975&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Pyramid in Egypt",alt:"Pyramid in Egypt",link:"https://images.unsplash.com/photo-1562679299-d21b8e13ac09?q=80&w=1972&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"View of ocean from villa steps in Greece",alt:"View of ocean from villa steps in Greece",link:"https://images.unsplash.com/photo-1533105079780-92b9be482077?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Downtown Tokyo",alt:"Downtown Tokyo",link:"https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?q=80&w=2094&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}].forEach((e=>{g(e)})),v.addEventListener("click",(()=>{D(b)})),n(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQU8sTUFBTUEsRUFBVyxDQUN0QkMsYUFBYyxlQUNkQyxjQUFlLGdCQUNmQyxxQkFBc0Isc0JBQ3RCQyxvQkFBcUIsOEJBQ3JCQyxnQkFBaUIscUJBQ2pCQyxXQUFZLGVBQ1pDLG9CQUFxQiwyQkFZakJDLEVBQWlCQSxDQUFDQyxFQUFhQyxFQUFjQyxLQUNqRCxNQUFNQyxFQUFlSCxFQUFZSSxjQUFjLElBQUlILEVBQWFJLFlBQ2hFSixFQUFhSyxVQUFVQyxPQUFPTCxFQUFPSixxQkFFckNLLEVBQWFLLFlBQWMsRUFBRSxFQTRCekJDLEVBQW9CQSxDQUFDQyxFQUFXQyxFQUFlVCxLQVo1QlEsSUFDaEJBLEVBQVVFLE1BQU1YLElBQ2JBLEVBQWFZLFNBQVNDLFFBVzVCQyxDQUFnQkwsR0FDbEJNLEVBQWNMLEVBQWVULElBRTdCUyxFQUFjTSxVQUFXLEVBQ3pCTixFQUFjTCxVQUFVQyxPQUFPTCxFQUFPUCxxQkFDeEMsRUFHSXFCLEVBQWdCQSxDQUFDTCxFQUFlVCxLQUNwQ1MsRUFBY00sVUFBVyxFQUN6Qk4sRUFBY0wsVUFBVVksSUFBSWhCLEVBQU9QLG9CQUFvQixFQTBCNUN3QixFQUFvQmpCLElBQ2RrQixTQUFTQyxpQkFBaUJuQixFQUFPVixjQUN6QzhCLFNBQVN0QixJQXpCTXVCLEVBQUN2QixFQUFhRSxLQUN0QyxNQUFNUSxFQUFZYyxNQUFNQyxLQUN0QnpCLEVBQVlxQixpQkFBaUJuQixFQUFPVCxnQkFFaENrQixFQUFnQlgsRUFBWUksY0FBY0YsRUFBT1Isc0JBRXZEZ0MsUUFBUUMsSUFBSWpCLEdBQ1pnQixRQUFRQyxJQUFJaEIsR0FFWkYsRUFBa0JDLEVBQVdDLEVBQWVULEdBRTVDRixFQUFZNEIsaUJBQWlCLFNBQVMsS0FDcENaLEVBQWNMLEVBQWVULEVBQU8sSUFHdENRLEVBQVVZLFNBQVNyQixJQUNqQkEsRUFBYTJCLGlCQUFpQixTQUFTLFdBdkRoQkMsRUFBQzdCLEVBQWFDLEVBQWNDLEtBQ2hERCxFQUFhWSxTQUFTQyxNQVF6QmYsRUFBZUMsRUFBYUMsRUFBY0MsR0F6QnZCNEIsRUFBQzlCLEVBQWFDLEVBQWM4QixFQUFjN0IsS0FDL0QsTUFBTThCLEVBQWtCaEMsRUFBWUksY0FDbEMsSUFBSUgsRUFBYUksWUFFbkJKLEVBQWFLLFVBQVVZLElBQUloQixFQUFPSixxQkFFbENrQyxFQUFnQnhCLFlBQWN1QixDQUFZLEVBWXhDRCxDQUNFOUIsRUFDQUMsRUFDQUEsRUFBYWdDLGtCQUNiL0IsRUFJSixFQThDSTJCLENBQW1CN0IsRUFBYUMsRUFBY0MsR0FDOUNPLEVBQWtCQyxFQUFXQyxFQUFlVCxFQUM5QyxHQUFFLEdBQ0YsRUFNQXFCLENBQWtCdkIsRUFBYUUsRUFBTyxHQUN0QyxFQUdKaUIsRUFBaUI1QixHQ25ERTZCLFNBQVNDLGlCQUFpQixnQkFDekJELFNBQVNDLGlCQUFpQixpQkFuQzlDLE1Bc0NNYSxFQUFvQmQsU0FBU2hCLGNBQWMseUJBQzNDK0IsRUFBWWYsU0FBU2hCLGNBQWMsZUFFbkNnQyxHQURxQmhCLFNBQVNoQixjQUFjLHdCQUM5QitCLEVBQVUvQixjQUFjLGlCQUN0Q2lDLEVBQWNqQixTQUFTaEIsY0FBYyxrQkFDckNrQyxFQUFxQmxCLFNBQVNoQixjQUFjLHlCQUM1Q21DLEVBQW1CbkIsU0FBU2hCLGNBQWMsdUJBQzFDb0MsRUFBMEJwQixTQUFTaEIsY0FDdkMsOEJBSUlxQyxFQUFlckIsU0FBU2hCLGNBQWMsa0JBQ3RDc0MsRUFBWXRCLFNBQVNoQixjQUFjLGdCQUVuQ3VDLEVBQWN2QixTQUFTaEIsY0FBYyxrQkFDckN3QyxFQUFtQkQsRUFBWXZDLGNBQWMsaUJBQzdDeUMsRUFBcUJGLEVBQVl2QyxjQUFjLHlCQUcvQzBDLEVBQWdCMUIsU0FBU2hCLGNBQWMsd0JBQ3ZDMkMsRUFBZTNCLFNBQVNoQixjQUFjLGVBQ3RDNEMsRUFBY0QsRUFBYTNDLGNBQWMsZ0JBRXpDNkMsR0FEcUJGLEVBQWEzQyxjQUFjLHdCQUM3QjJDLEVBQWEzQyxjQUFjLHNCQUM5QzhDLEVBQWlCSCxFQUFhM0MsY0FBYyx3QkFDNUMrQyxFQUFlL0IsU0FBU0MsaUJBQWlCLHdCQVUvQyxTQUFTK0IsRUFBV0MsR0FBMEIsSUFBcEJDLEVBQU1DLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUcsVUFDakMsTUFBTUcsRUFXUixTQUF3QkMsR0FDdEIsTUFBTUQsRUFBY2pCLEVBQWFtQixRQUM5QnhELGNBQWMsU0FDZHlELFdBQVUsR0FFUEMsRUFBa0JKLEVBQVl0RCxjQUFjLGVBQzVDMkQsRUFBWUwsRUFBWXRELGNBQWMsZ0JBQ3RDNEQsRUFBaUJOLEVBQVl0RCxjQUFjLHNCQUMzQzZELEVBQW1CUCxFQUFZdEQsY0FBYyx3QkFxQm5ELE9BbkJBMEQsRUFBZ0J0RCxZQUFjbUQsRUFBS08sS0FDbkNILEVBQVVJLElBQU1SLEVBQUtTLEtBQ3JCTCxFQUFVTSxJQUFNVixFQUFLTyxLQUVyQkQsRUFBaUJyQyxpQkFBaUIsU0FBUyxLQUN6QzhCLEVBQVluRCxRQUFRLElBR3RCeUQsRUFBZXBDLGlCQUFpQixTQUFTLEtBQ3ZDb0MsRUFBZTFELFVBQVVnRSxPQUFPLDBCQUEwQixJQUc1RFAsRUFBVW5DLGlCQUFpQixTQUFTLEtBQ2xDMkMsRUFBVTVCLEdBQ1ZDLEVBQWlCdUIsSUFBTVIsRUFBS1MsS0FDNUJ4QixFQUFpQnlCLElBQU1WLEVBQUtPLEtBQzVCckIsRUFBbUJyQyxZQUFjbUQsRUFBS08sSUFBSSxJQUdyQ1IsQ0FDVCxDQXpDc0JjLENBQWVuQixHQUNuQ1gsRUFBVVksR0FBUUksRUFDcEIsQ0FFQSxTQUFTZSxFQUFXQyxHQUNsQmhELFFBQVFDLElBQUksaUJBQWtCK0MsR0FDOUJBLEVBQU1wRSxVQUFVQyxPQUFPLGdCQUN2QmEsU0FBU3VELG9CQUFvQixVQUFXQyxHQUN4Q0YsRUFBTUMsb0JBQW9CLFlBQWFFLEVBQ3pDLENBa0NBLFNBQVNOLEVBQVVHLEdBQ2pCQSxFQUFNcEUsVUFBVVksSUFBSSxnQkFDcEJFLFNBQVNRLGlCQUFpQixVQUFXZ0QsR0FDckNGLEVBQU05QyxpQkFBaUIsWUFBYWlELEVBQ3RDLENBRUEsU0FBU0QsRUFBZ0JFLEdBQ3ZCLEdBQWdCLFdBQVpBLEVBQUlDLElBQWtCLENBQ3hCLE1BQU1SLEVBQVluRCxTQUFTaEIsY0FBYyxpQkFDckNtRSxHQUNGRSxFQUFXRixFQUVmLENBQ0YsQ0FTQSxTQUFTTSxFQUFtQkcsR0FDdEJBLEVBQU1DLE9BQU8zRSxVQUFVNEUsU0FBUyxpQkFDbENULEVBQVdPLEVBQU1DLE9BRXJCLENBL0V5QmxDLEVBQWEzQyxjQUFjLHVCQUU5QmdCLFNBQVNoQixjQUFjLG9CQUMxQmdCLFNBQVNoQixjQUFjLHlCQUN4QmdCLFNBQVNoQixjQUFjLHdCQTZGekMrQyxFQUFhN0IsU0FBUzZELElBQ3BCLE1BQU1DLEVBQVFELEVBQU9FLFFBQVEsVUFFN0JGLEVBQU92RCxpQkFBaUIsU0FBUyxJQUFNNkMsRUFBV1csSUFBTyxJQUczRGxELEVBQWtCTixpQkFBaUIsU0FBUyxLRHJJYjBELElBQUN0RixFQUF3QkUsRUNzSXREcUMsRUFBaUJnRCxNQUFRbEQsRUFBWTdCLFlBQ3JDZ0MsRUFBd0IrQyxNQUFRakQsRUFBbUI5QixZRHZJckJSLEVDeUk1Qm9DLEVEeklvRGxDLEVDMklwRFgsRUFEQSxDQUFDZ0QsRUFBa0JDLEdEeklYbEIsU0FBU2tFLElBQ2pCekYsRUFBZUMsRUFBYXdGLEVBQU90RixFQUFPLElDMkk1Q3FFLEVBQVVwQyxFQUFVLElBR3RCQyxFQUFZUixpQkFBaUIsVUE5QzdCLFNBQXFDa0QsR0FDbkNBLEVBQUlXLGlCQUNKcEQsRUFBWTdCLFlBQWMrQixFQUFpQmdELE1BQzNDakQsRUFBbUI5QixZQUFjZ0MsRUFBd0IrQyxNQUN6RGQsRUFBV3RDLEVBQ2IsSUEwQ0FhLEVBQVlwQixpQkFBaUIsVUFsQzdCLFNBQWlDa0QsR0FDL0JBLEVBQUlXLGlCQUVKL0QsUUFBUUMsSUFBSXNCLEVBQWlCc0MsT0FDN0I3RCxRQUFRQyxJQUFJdUIsRUFBZXFDLE9BTTNCbkMsRUFMb0IsQ0FDbEJjLEtBQU1oQixFQUFlcUMsTUFDckJuQixLQUFNbkIsRUFBaUJzQyxRQUl6QlQsRUFBSUcsT0FBT1MsUUFFWGpCLEVBQVcxQixFQUNiLElBaEtxQixDQUNuQixDQUNFbUIsS0FBTSwwQ0FDTkcsSUFBSyx5Q0FDTEQsS0FBTSwwS0FFUixDQUNFRixLQUFNLG9DQUNORyxJQUFLLG9DQUNMRCxLQUFNLHVLQUVSLENBQ0VGLEtBQU0sbUJBQ05HLElBQUssbUJBQ0xELEtBQU0sMEtBRVIsQ0FDRUYsS0FBTSxtQkFDTkcsSUFBSyxtQkFDTEQsS0FBTSx1S0FFUixDQUNFRixLQUFNLDJDQUNORyxJQUFLLDJDQUNMRCxLQUFNLDBLQUVSLENBQ0VGLEtBQU0saUJBQ05HLElBQUssaUJBQ0xELEtBQU0sMktBeUpHOUMsU0FBUytCLElBQ3BCRCxFQUFXQyxFQUFLLElBR2xCUCxFQUFjbEIsaUJBQWlCLFNBQVMsS0FDdEMyQyxFQUFVeEIsRUFBYSxJQUd6QjVCLEVBQWlCNUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXQtZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbiAgaW5wdXRFcnJvclR5cGVDbGFzczogXCJtb2RhbF9faW5wdXQtZXJyb3JfdHlwZVwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JUeXBlQ2xhc3MpO1xuXG4gIGVycm9yTXNnRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yVHlwZUNsYXNzKTtcblxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKFxuICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICBjb25maWdcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIGNvbnNvbGUubG9nKGlucHV0TGlzdCk7XG4gIGNvbnNvbGUubG9nKGJ1dHRvbkVsZW1lbnQpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcblxuICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgcmVzZXRWYWxpZGF0aW9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG4vLyBpbXBvcnQgYXZhdGFySW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9zcG90cy1hdmF0YXItYW5kLWNhcmQtaW1hZ2VzL2F2YXRhci5qcGdcIjtcbi8vIGltcG9ydCBlZGl0SWNvbiBmcm9tIFwiLi4vaW1hZ2VzL3Nwb3RzLWF2YXRhci1hbmQtY2FyZC1pbWFnZXMvZWRpdC1pY29uLnN2Z1wiO1xuLy8gaW1wb3J0IGFkZEljb24gZnJvbSBcIi4uL2ltYWdlcy9zcG90cy1hdmF0YXItYW5kLWNhcmQtaW1hZ2VzL25ldy1wb3N0LWljb24uc3ZnXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiV2Fsa2luZyB0aHJvdWdoIGEgSmFwYW5lc2Ugc2lkZSBzdHJlZXQgXCIsXG4gICAgYWx0OiBcIldhbGtpbmcgdGhyb3VnaCBhIEphcGFuZXNlIHNpZGUgc3RyZWV0XCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwODUwNDUwOTU0My01Y2E1NjQ0MGUwMTM/cT04MCZ3PTE5NzQmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk91dGRvb3IgY2FmZSBuZWFyIHN0cmVhbSBpbiBJdGFseVwiLFxuICAgIGFsdDogXCJPdXRkb29yIGNhZmUgbmVhciBzdHJlYW0gaW4gSXRhbHlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTUzMzQyMzg1LTExMWZkNmJjNmFiMz9xPTgwJnc9MTkzNSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW91bnQgT3NvLCBKYXBhblwiLFxuICAgIGFsdDogXCJNb3VudCBPc28sIEphcGFuXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyMDMxMjUwMTM4NC1kYmRiODNhMWNiMTE/cT04MCZ3PTE5NzUmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlB5cmFtaWQgaW4gRWd5cHRcIixcbiAgICBhbHQ6IFwiUHlyYW1pZCBpbiBFZ3lwdFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NjI2NzkyOTktZDIxYjhlMTNhYzA5P3E9ODAmdz0xOTcyJmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWaWV3IG9mIG9jZWFuIGZyb20gdmlsbGEgc3RlcHMgaW4gR3JlZWNlXCIsXG4gICAgYWx0OiBcIlZpZXcgb2Ygb2NlYW4gZnJvbSB2aWxsYSBzdGVwcyBpbiBHcmVlY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTMzMTA1MDc5NzgwLTkyYjliZTQ4MjA3Nz9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRG93bnRvd24gVG9reW9cIixcbiAgICBhbHQ6IFwiRG93bnRvd24gVG9reW9cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQwOTU5NzMzMzMyLWVhYjRkZWFiZWVhZj9xPTgwJnc9MjA5NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcbiAgfSxcbl07XG5cbi8vbW9kYWxcbmNvbnN0IG1vZGFsRm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgbW9kYWxJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcblxuLy9wcm9maWxlIG1vZGFsXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRm9ybSA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgcHJvZmlsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZUlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbi8vY2FyZHNcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmNvbnN0IGNhcmRQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgY2FyZFByZXZpZXdJbWFnZSA9IGNhcmRQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuY29uc3QgY2FyZFByZXZpZXdDYXB0aW9uID0gY2FyZFByZXZpZXcucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcblxuLy9uZXcgcG9zdCBtb2RhbFxuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9zdC1tb2RhbFwiKTtcbmNvbnN0IG5ld1Bvc3RGb3JtID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBuZXdQb3N0Q2xvc2VCdXR0b24gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuY29uc3QgbmV3UG9zdGxpbmtJbnB1dCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWxpbmstaW5wdXRcIik7XG5jb25zdCBuZXdQb3N0Q2FwdGlvbiA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWNhcHRpb24taW5wdXRcIik7XG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBwb3N0U3VibWl0QnV0dG9uID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpO1xuXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbi8vIHByb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFySW1hZ2U7XG4vLyBlZGl0QnV0dG9uLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtlZGl0SWNvbn0pYDtcbi8vIGFkZEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7YWRkSWNvbn0pYDtcblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc0xpc3RbbWV0aG9kXShjYXJkRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgY29uc29sZS5sb2coXCJDbG9zaW5nIG1vZGFsOlwiLCBtb2RhbCk7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZUtleSk7XG4gIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlT3V0c2lkZUNsaWNrKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgY29uc3QgY2FyZE5hbWVFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZXh0XCIpO1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgY2FyZE5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuXG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIik7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChjYXJkUHJldmlldyk7XG4gICAgY2FyZFByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgY2FyZFByZXZpZXdJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgY2FyZFByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZU91dHNpZGVDbGljayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVzY2FwZUtleShldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgICBpZiAob3Blbk1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5Nb2RhbCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZUlucHV0TmFtZS52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcHJvZmlsZUlucHV0RGVzY3JpcHRpb24udmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3V0c2lkZUNsaWNrKGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgY2xvc2VNb2RhbChldmVudC50YXJnZXQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zb2xlLmxvZyhuZXdQb3N0bGlua0lucHV0LnZhbHVlKTtcbiAgY29uc29sZS5sb2cobmV3UG9zdENhcHRpb24udmFsdWUpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHtcbiAgICBuYW1lOiBuZXdQb3N0Q2FwdGlvbi52YWx1ZSxcbiAgICBsaW5rOiBuZXdQb3N0bGlua0lucHV0LnZhbHVlLFxuICB9O1xuXG4gIHJlbmRlckNhcmQoaW5wdXRWYWx1ZXMpO1xuICBldnQudGFyZ2V0LnJlc2V0KCk7XG5cbiAgY2xvc2VNb2RhbChuZXdQb3N0TW9kYWwpO1xufVxuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG5cbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKHBvcHVwKSk7XG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcHJvZmlsZUlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBwcm9maWxlSW5wdXREZXNjcmlwdGlvbi52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgcmVzZXRWYWxpZGF0aW9uKFxuICAgIHByb2ZpbGVGb3JtLFxuICAgIFtwcm9maWxlSW5wdXROYW1lLCBwcm9maWxlSW5wdXREZXNjcmlwdGlvbl0sXG4gICAgc2V0dGluZ3NcbiAgKTtcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG59KTtcblxucHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXQpO1xubmV3UG9zdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdQb3N0Rm9ybVN1Ym1pdCk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIHJlbmRlckNhcmQoaXRlbSk7XG59KTtcblxubmV3UG9zdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwobmV3UG9zdE1vZGFsKTtcbn0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvclR5cGVDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJjb25maWciLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiYWRkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImNvbnNvbGUiLCJsb2ciLCJhZGRFdmVudExpc3RlbmVyIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1zZ0VsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZWRpdE1vZGFsIiwicHJvZmlsZUZvcm0iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVJbnB1dE5hbWUiLCJwcm9maWxlSW5wdXREZXNjcmlwdGlvbiIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImNhcmRQcmV2aWV3IiwiY2FyZFByZXZpZXdJbWFnZSIsImNhcmRQcmV2aWV3Q2FwdGlvbiIsIm5ld1Bvc3RCdXR0b24iLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0Rm9ybSIsIm5ld1Bvc3RsaW5rSW5wdXQiLCJuZXdQb3N0Q2FwdGlvbiIsImNsb3NlQnV0dG9ucyIsInJlbmRlckNhcmQiLCJpdGVtIiwibWV0aG9kIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2FyZEVsZW1lbnQiLCJkYXRhIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRWxlbWVudCIsImNhcmRJbWFnZSIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwidG9nZ2xlIiwib3Blbk1vZGFsIiwiZ2V0Q2FyZEVsZW1lbnQiLCJjbG9zZU1vZGFsIiwibW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlRXNjYXBlS2V5IiwiaGFuZGxlT3V0c2lkZUNsaWNrIiwiZXZ0Iiwia2V5IiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImJ1dHRvbiIsInBvcHVwIiwiY2xvc2VzdCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwiaW5wdXQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0Il0sInNvdXJjZVJvb3QiOiIifQ==